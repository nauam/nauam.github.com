(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{374:function(e,t,a){"use strict";a.r(t);var s=a(41),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"job-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#job-options"}},[e._v("#")]),e._v(" "),a("em",[e._v("Job")]),e._v(" Options")]),e._v(" "),a("p",[e._v("The "),a("em",[e._v("Jobs")]),e._v(" can be configured to prompt a user for input by defining one or more named options. An option models a named parameter that can be required or optional and include a range of choices that will be presented to the user when the "),a("em",[e._v("Job")]),e._v(" is run.")]),e._v(" "),a("p",[e._v("Users supply options by typing in a value or selecting from a menu of choices. A validation pattern ensures input complies to the option requirement. Once chosen, the value chosen for the option is accessible to the commands called by the "),a("em",[e._v("Job")]),e._v(".")]),e._v(" "),a("p",[e._v("Option choices can be modeled as a static set or from a dynamic source. Static choices can be modeled as a comma separated list in the "),a("em",[e._v("job")]),e._v(" definition. When option values must be dynamic, the "),a("em",[e._v("Job")]),e._v(" can be defined to use a URL to retrieve option data from an external source. Enabling "),a("em",[e._v("Jobs")]),e._v(" to access external sources via URL opens the door to integrating with other tools and incorporating their data into "),a("em",[e._v("Job")]),e._v(" workflows.")]),e._v(" "),a("h2",{attrs:{id:"prompting-the-user"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prompting-the-user"}},[e._v("#")]),e._v(" Prompting the user")]),e._v(" "),a("p",[e._v("The obvious effect from defining "),a("em",[e._v("Job")]),e._v(" options is their appearance to the user running the "),a("em",[e._v("Job")]),e._v('. Users will be presented a page called "Choose Execution Options..." where input and menu choices must be configured.')]),e._v(" "),a("p",[e._v("Command line users executing "),a("em",[e._v("Jobs")]),e._v(" via the "),a("code",[e._v("run")]),e._v(" shell tool also will specify options as an argument string.")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("run")]),e._v(" command does not prompt the user for required options so you must specify them directly.")])]),e._v(" "),a("p",[e._v("It is worth spending a moment to consider how options become part of the user interface to "),a("em",[e._v("Jobs")]),e._v(" and give some thought to this next level of procedure formalization.")]),e._v(" "),a("ul",[a("li",[e._v("Naming and description convention: Visualize how the user will read the option name and judge its purpose from the description you supply.")]),e._v(" "),a("li",[e._v("Required options: Making an option required means the "),a("em",[e._v("Job")]),e._v(" will fail if a user does not specify a non-blank value. In other words, a blank or missing value is not allowed for the option.")]),e._v(" "),a("li",[e._v("Input restrictions and validation: If you need to make the option value be somewhat open ended consider how you can create safeguards to control their choice.")])]),e._v(" "),a("h2",{attrs:{id:"input-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#input-types"}},[e._v("#")]),e._v(" Input Types")]),e._v(" "),a("p",[e._v("Option Input Types define how the option is presented in the GUI, and how it is used when the "),a("em",[e._v("Job")]),e._v(" executes.")]),e._v(" "),a("p",[e._v("Input types:")]),e._v(" "),a("ul",[a("li",[e._v('"Plain"\n'),a("ul",[a("li",[e._v("a normal option which is shown in clear text")])])]),e._v(" "),a("li",[e._v('"Secure"\n'),a("ul",[a("li",[e._v("a secure option which is obscured at user input time, and the value of which is not stored in the database. See "),a("RouterLink",{attrs:{to:"/en/user-guide/job-options.html#secure-options"}},[e._v("secure options")]),e._v(".")],1)])]),e._v(" "),a("li",[e._v('"Secure Remote Authentication"\n'),a("ul",[a("li",[e._v("a secure option which is used only for remote authentication and is not exposed in scripts or commands. See "),a("RouterLink",{attrs:{to:"/en/user-guide/job-options.html#secure-remote-authentication-options"}},[e._v("secure remote authentication options")]),e._v(".")],1)])])]),e._v(" "),a("h2",{attrs:{id:"options-editor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-editor"}},[e._v("#")]),e._v(" Options editor")]),e._v(" "),a("p",[e._v("Options can be created for any stored "),a("em",[e._v("Job")]),e._v(". The "),a("em",[e._v("Job")]),e._v(" edit page contains an area displaying a summary to existing options and a link to add new ones or edit existing ones.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/fig0501.png",alt:"Add option link"}})]),e._v(" "),a("p",[e._v("The option summary shows each option and its default value if it defines them.")]),e._v(" "),a("p",[e._v('Clicking the "edit" link opens the options editor.')]),e._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/fig0503.png",alt:"Option editor"}})]),e._v(" "),a("p",[e._v('The options editor displays an expanded summary for each defined option. Each option is listed with its usage summary, description, values list and any restrictions. Pressing the "Add an option" link will open a form to define a new parameter. Pressing the "Close" link will collapse the options editor and return back to the summary view.')]),e._v(" "),a("p",[e._v("Moving the mouse over any row in the options editor reveals links to delete or edit the highlighted option. Pressing the remove icon will display a prompt confirming you want to delete that option from the "),a("em",[e._v("Job")]),e._v(".")]),e._v(" "),a("p",[e._v('Clicking the "edit" link opens a new form that lets you modify all aspects of that option.')]),e._v(" "),a("p",[e._v("Options can also be defined as part of a "),a("em",[e._v("job")]),e._v(" definition and later loaded to the server. See "),a("RouterLink",{attrs:{to:"/en/user-guide/document-format-reference/job-v20.html"}},[e._v("job-xml")]),e._v(" and "),a("RouterLink",{attrs:{to:"/en/user-guide/document-format-reference/job-yaml-v12.html"}},[e._v("job-yaml")]),e._v(" ands "),a("RouterLink",{attrs:{to:"/en/https://google.github.io/cli/commands/#jobs"}},[e._v("rd "),a("em",[e._v("jobs")])]),e._v(" pages if you prefer using an textual "),a("em",[e._v("Job")]),e._v(" definition.")],1),e._v(" "),a("h2",{attrs:{id:"defining-an-option"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defining-an-option"}},[e._v("#")]),e._v(" Defining an option")]),e._v(" "),a("h3",{attrs:{id:"text-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#text-options"}},[e._v("#")]),e._v(" Text Options")]),e._v(" "),a("p",[e._v('New options can be defined by pressing the "Add an option" link while existing ones can be changed by pressing their "edit" link.')]),e._v(" "),a("p",[e._v('Choose "Text" from the Option Type:')]),e._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/fig0502.png",alt:"Option edit form"}})]),e._v(" "),a("p",[e._v("The option definition form is organized into several areas:")]),e._v(" "),a("h3",{attrs:{id:"identification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#identification"}},[e._v("#")]),e._v(" Identification")]),e._v(" "),a("p",[e._v("Here you provide the option's name and description. The name becomes part of acceptable arguments to the "),a("em",[e._v("Job")]),e._v(" while the description will be provided as help text to users running the "),a("em",[e._v("Job")]),e._v(".")]),e._v(" "),a("p",[e._v("The Default Value will be pre-selected in the GUI when the option is presented.")]),e._v(" "),a("h3",{attrs:{id:"input-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#input-type"}},[e._v("#")]),e._v(" Input Type")]),e._v(" "),a("p",[e._v('Choose between "Plain", "Date", "Secure" and "Secure Remote Authentication". For input types other than "Plain", the multi-valued option will be disabled.')]),e._v(" "),a("h3",{attrs:{id:"date-format"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#date-format"}},[e._v("#")]),e._v(" Date Format")]),e._v(" "),a("p",[e._v('If "Date" Input Type is chosen, you can enter a date format to use when selecting the date in the user interface. Using the '),a("a",{attrs:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank",rel:"noopener noreferrer"}},[e._v("momentjs format"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"default-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#default-value"}},[e._v("#")]),e._v(" Default Value")]),e._v(" "),a("p",[e._v("A Default Value will automatically be set for the option if it is not otherwise specified by the user, even if not specified among the arguments when executing a "),a("em",[e._v("job")]),e._v(" via the command-line or API. Note that a blank value can be specified via the command-line or API, which will override the use of the Default Value.")]),e._v(" "),a("h3",{attrs:{id:"allowed-values"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#allowed-values"}},[e._v("#")]),e._v(" Allowed values")]),e._v(" "),a("p",[e._v('Allowed values provide a model of possible choices. This can contain a static list of values or a URL to a server providing option data. Values can be specified as a comma separated list as seen above but can also be requested from an external source using a "remote URL".')]),e._v(" "),a("h3",{attrs:{id:"restrictions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restrictions"}},[e._v("#")]),e._v(" Restrictions")]),e._v(" "),a("p",[e._v('Defines criteria on which input to accept or present. Option choices can be controlled using the "Enforced from values" restriction. When set "true", will only present a popup menu. If set "false", a text field will also be presented. Enter a regular expression in the "Match Regular Expression" field the '),a("em",[e._v("Job")]),e._v(" will evaluate when run.")]),e._v(" "),a("h3",{attrs:{id:"requirement"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirement"}},[e._v("#")]),e._v(" Requirement")]),e._v(" "),a("p",[e._v("Indicates if the "),a("em",[e._v("Job")]),e._v(' can only run if a non-blank value is provided for that Option. Choose "No" to indicate that a blank value is allowed, and choose "Yes" to indicate that a blank value is not allowed.')]),e._v(" "),a("p",[e._v("If a Default Value is set, then it will be used when no value is provided, unless a blank value is allowed and is explicitly specified.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/fig-option-multival.png",alt:"Option Multivalued Form"}})]),e._v(" "),a("h3",{attrs:{id:"multi-valued"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#multi-valued"}},[e._v("#")]),e._v(" Multi-valued")]),e._v(" "),a("p",[e._v('Defines if the user input can consist of multiple values. Choosing "No" states that only a single value can chosen as input. Choosing "Yes" states that the user may select multiple input values from the Allowed values and/or enter multiple values of their own.')]),e._v(" "),a("h3",{attrs:{id:"delimiter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delimiter"}},[e._v("#")]),e._v(" Delimiter")]),e._v(" "),a("p",[e._v("The delimiter string will be used to separate the multiple values when the "),a("em",[e._v("Job")]),e._v(" is run.")]),e._v(" "),a("h3",{attrs:{id:"select-all-values-by-default"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#select-all-values-by-default"}},[e._v("#")]),e._v(" Select All Values by Default")]),e._v(" "),a("p",[e._v("If checked, and no default value(s) are specified, all of the remote or local values will be selected by default.")]),e._v(" "),a("p",[e._v('Once satisfied with the option definition, press the "Save" button to add it to the '),a("em",[e._v("Job")]),e._v(' definition. Pressing the "Cancel" button will dismiss the changes and close the form.')]),e._v(" "),a("p",[e._v("Usage (see below)")]),e._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/fig-option-usage.png",alt:"Option Usage"}})]),e._v(" "),a("h3",{attrs:{id:"option-timestamp-variable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#option-timestamp-variable"}},[e._v("#")]),e._v(" Option timestamp variable")]),e._v(" "),a("p",[e._v("You can use the string "),a("code",[e._v("${DATE:format}")]),e._v(" as a "),a("em",[e._v("job")]),e._v(" option value (either as default value or as input by the user), which will be converted when the "),a("em",[e._v("job")]),e._v("/command is executed. This variable also allows you to add or remove days as you can see below.")]),e._v(" "),a("p",[a("code",[e._v("${DATE:format}")]),e._v(" current date in format used by the Java "),a("RouterLink",{attrs:{to:"/en/user-guide/en/https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html"}},[e._v("SimpleDateFormatter")])],1),e._v(" "),a("p",[a("code",[e._v("${DATE+2:format}")]),e._v(" two days from now")]),e._v(" "),a("p",[a("code",[e._v("${DATE-2:format}")]),e._v(" two days ago")]),e._v(" "),a("h3",{attrs:{id:"file-option-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-option-type"}},[e._v("#")]),e._v(" File Option Type")]),e._v(" "),a("p",[e._v('Choose "File" from the Option Type:')]),e._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/fig-newoption-file.png",alt:"File Option Edit Form"}})]),e._v(" "),a("p",[e._v("The Option Name and Description can be entered.")]),e._v(" "),a("h3",{attrs:{id:"required"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#required"}},[e._v("#")]),e._v(" Required")]),e._v(" "),a("p",[e._v("Choose whether to require the option have a value.")]),e._v(" "),a("p",[e._v("File option usage:")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("option.NAME")]),e._v(" variable will contain a unique ID identifying the uploaded file.")]),e._v(" "),a("p",[a("code",[e._v("file.NAME")]),e._v(" will be the local file path.")]),e._v(" "),a("p",[a("code",[e._v("file.NAME.filename")]),e._v(" will be the original file name (if available).")]),e._v(" "),a("p",[a("code",[e._v("file.NAME.sha")]),e._v(" will be the SHA256 hash of the file.")]),e._v(" "),a("h2",{attrs:{id:"script-usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#script-usage"}},[e._v("#")]),e._v(" Script usage")]),e._v(" "),a("p",[e._v("Option values can be passed to scripts as an argument or referenced inside the script via a named token. Each option value is defined in the Options context variables as "),a("code",[e._v("option.NAME")]),e._v(".")]),e._v(" "),a("p",[e._v("See the "),a("RouterLink",{attrs:{to:"/en/user-guide/job-workflows.html#context-variables"}},[e._v("Context Variables")]),e._v(" Section.")],1),e._v(" "),a("p",[a("strong",[e._v("Example:")])]),e._v(" "),a("p",[e._v("A "),a("em",[e._v("Job")]),e._v(' named "hello" and has an option named "message".')]),e._v(" "),a("p",[e._v('The "hello" '),a("em",[e._v("Job")]),e._v(" option signature would be: "),a("code",[e._v("-message <>")]),e._v(".")]),e._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/fig0504.png",alt:"Option usage"}})]),e._v(" "),a("p",[e._v("The arguments passed to the script are defined as "),a("code",[e._v("${option.message}")]),e._v(".")]),e._v(" "),a("p",[e._v('Here\'s the content of this simple script that shows the various\nforms to access the value of the "message" option.')]),e._v(" "),a("div",{staticClass:"language-bash .numberLines extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[e._v("#!/bin/sh")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("envvar")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$RDoptionMESSAGE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# access message as environment variable.")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("args")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# read value passed into argument vector")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("message")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("@option.message@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# access message via replacement token syntax")]),e._v("\n")])])]),a("p",[e._v('When the user runs the "hello" '),a("em",[e._v("job")]),e._v(' they will be prompted for the\n"message" value.')]),e._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/fig0505.png",alt:"Option entered"}})]),e._v(" "),a("p",[e._v('Let\'s assume they chose the word "howdy" in response. The output of the '),a("em",[e._v("Job")]),e._v(" will be:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("envar")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("howdy\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("args")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("howdy\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("message")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("howdy\n")])])]),a("p",[e._v("If you define the option to be "),a("em",[e._v("Required")]),e._v(", then the "),a("em",[e._v("Job")]),e._v(" will fail to run unless the user supplies a value that is not blank.")]),e._v(" "),a("p",[e._v("If you define the option to not be "),a("em",[e._v("Required")]),e._v(", then the option value is allowed to be blank, and specifying a blank value would result in:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("envar")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("args")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("message")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n")])])]),a("p",[e._v("You can use the "),a("em",[e._v("Default Value")]),e._v(" of an option to provide a value in the case where the user doesn't specify it. In the GUI, the "),a("em",[e._v("Default Value")]),e._v(" will automatically be presented in the "),a("em",[e._v("Job")]),e._v(" Execution page. From the CLI or API, leaving off a "),a("code",[e._v("-option")]),e._v(" argument to a "),a("em",[e._v("job")]),e._v(" will use the default value.")]),e._v(" "),a("p",[e._v("You can also handle default values within a script, if your option doesn't specify one, or the user specifies a blank value for the option:")]),e._v(" "),a("p",[a("strong",[e._v("Environment variable:")])]),e._v(" "),a("p",[e._v("As a precaution you might test existence for the variable and perhaps set a default value. To test its existence you might use:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v(" -s "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$RDoptionNAME")]),e._v('"')]),e._v("\n")])])]),a("p",[e._v("You might also use a Bash feature that tests and defaults it to a value:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${RDoptionNAME"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":=")]),e._v("mydefault}")]),e._v("\n")])])]),a("p",[a("strong",[e._v("Replacement token:")])]),e._v(" "),a("p",[e._v("If the option is blank or unset the token will be replaced with a blank string. You might write your script a bit more defensively and change the implementation like so:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("message")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"@option.message@"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" -z "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$message")]),e._v('"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("then")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("message")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("mydefault\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("fi")]),e._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("The replacement token syntax is only supported in inline script "),a("em",[e._v("steps")]),e._v(" (ie, not script file or command "),a("em",[e._v("steps")]),e._v(").")])]),e._v(" "),a("p",[a("strong",[e._v("Escaping Replacement Token:")])]),e._v(" "),a("p",[e._v("If you want to use the "),a("code",[e._v("@")]),e._v(" char in a way that looks like a replacement token you can escape it using "),a("code",[e._v("@@")]),e._v(", i.e. doubling it.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# escaping of @ sign to avoid expansion before the @option.domain@")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("email")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"user@@mail.@option.domain@"')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# If the first @ sign comes right before the token, use three @")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("email")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"user@@@option.domain@"')]),e._v("\n")])])]),a("p",[e._v("In this example, the "),a("code",[e._v("@@@option.domain@")]),e._v(" will result in "),a("code",[e._v("@mydomain")]),e._v(",\nand "),a("code",[e._v("@@mail.@option.domain2@")]),e._v(" will result in "),a("code",[e._v("@mail.mydomain")]),e._v(".")]),e._v(" "),a("p",[e._v("If you do not escape the "),a("code",[e._v("@")]),e._v(" in the second example, then "),a("code",[e._v("@mail.@")]),e._v(" will be expanded to a missing value, resulting in a blank string.")]),e._v(" "),a("p",[e._v("You do not need to escape the "),a("code",[e._v("@")]),e._v(" sign in all cases, only when it might look like an expansion token. If there are any whitespace characters before the next "),a("code",[e._v("@")]),e._v(" sign, it does not need to be escaped:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# first @ sign does not need to be escaped")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("text")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Hi user@somewhere, @option.greeting@!"')]),e._v("\n")])])]),a("h2",{attrs:{id:"escaped-values"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#escaped-values"}},[e._v("#")]),e._v(" Escaped values")]),e._v(" "),a("p",[e._v("When the arguments to script or the contents of a Command execution string are evaluated, embedded property references like "),a("code",[e._v("${option.name}")]),e._v(" are replaced by the values entered by a user.")]),e._v(" "),a("p",[e._v("To prevent any user input from including shell-special characters (accidentally or maliciously), any argument which has embedded references will be quoted for the shell.")]),e._v(" "),a("p",[e._v("You should also be careful in how arguments to scripts are used within a script.")]),e._v(" "),a("p",[e._v("For example, if you have a Shell script "),a("em",[e._v("step")]),e._v(" with argument string "),a("code",[e._v("${option.message}")]),e._v(", and script:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[e._v("#!/bin/bash")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$1")]),e._v("\n")])])]),a("p",[e._v("Then this script will partially expand the "),a("code",[e._v("${option.message}")]),e._v(" value a second time, even though it was correctly quoted to pass to your script.")]),e._v(" "),a("p",[e._v("You should do something like this instead:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[e._v("#!/bin/bash")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$1")]),e._v('"')]),e._v("\n")])])]),a("p",[e._v("Which allows the shell will correctly handle the input value by quoting it.")]),e._v(" "),a("h3",{attrs:{id:"using-non-escaped-values"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-non-escaped-values"}},[e._v("#")]),e._v(" Using non-escaped values")]),e._v(" "),a("p",[e._v("If the "),a("em",[e._v("job")]),e._v(" needs to provide an option in its raw, unescaped form it is possible to use the "),a("code",[e._v("unquotedoption")]),e._v(" context lookup key instead of "),a("code",[e._v("option")]),e._v(".")]),e._v(" "),a("p",[e._v("For example:\nThe option "),a("code",[e._v("${option.name}")]),e._v(" value could be accessed without any escaping by referencing it as "),a("code",[e._v("${unquotedoption.name}")]),e._v(" instead.   In a script similarly use "),a("code",[e._v("@unquotedoption.name@")]),e._v(" instead of "),a("code",[e._v("@option.name@")]),e._v(".")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("Using non-escaped values can expose the environment to security risks like Command injection (but not limited to command injection!).")])]),e._v(" "),a("blockquote",[a("p",[e._v("Consider the following example where a user is allowed to supply a list of directories to an hypothetical backup "),a("em",[e._v("job")]),e._v(". Let's also suppose the "),a("em",[e._v("job")]),e._v(" processed the directory list with "),a("code",[e._v("tar -zcvf /tmp/archive.tgz @unquotedoption.targetdirs@")]),e._v(". Then a malicious user could trick the "),a("em",[e._v("job")]),e._v(" into running an extra command by supplying this value for:\n"),a("code",[e._v("targetdirs")]),e._v(": "),a("code",[e._v("/etc/home/var/lib/redis; rm -rf/")]),e._v(".")])]),e._v(" "),a("p",[e._v("Then, depending on the user privileges, the script will happily nuke as many directories and files as it can on the target "),a("em",[e._v("node")]),e._v(". You can limit the risk by adopting appropriate regex masks, coding the script defensively, and using the least privilege principle.")]),e._v(" "),a("h2",{attrs:{id:"secure-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#secure-options"}},[e._v("#")]),e._v(" Secure Options")]),e._v(" "),a("p",[e._v("Options can be marked as Secure, to show a password prompt in the GUI, instead of a normal text field or drop down menu. Secure option values are not stored with the Execution as are the other option values.")]),e._v(" "),a("p",[e._v("There are two types of Secure options:")]),e._v(" "),a("ul",[a("li",[e._v("Secure\n"),a("ul",[a("li",[e._v("these option values are exposed in scripts and commands.")])])]),e._v(" "),a("li",[e._v("Secure Remote Authentication\n"),a("ul",[a("li",[e._v("these option values "),a("strong",[e._v("are not")]),e._v(" exposed in scripts and commands, and are only used by "),a("em",[e._v("Node")]),e._v(" Executors to authenticate to "),a("em",[e._v("Nodes")]),e._v(" and execute commands.")])])])]),e._v(" "),a("p",[e._v("Secure Options do not support Multi-valued input.")]),e._v(" "),a("p",[e._v("Secure Options cannot be used as authentication input to "),a("em",[e._v("Node")]),e._v(" Executors, you must use a Secure Remote Authentication option described below.")]),e._v(" "),a("h3",{attrs:{id:"important-note"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#important-note"}},[e._v("#")]),e._v(" Important Note")]),e._v(" "),a("p",[e._v('"Secure" option values are not stored in the database when the '),a("em",[e._v("Job")]),e._v(" is executed, but the value that is entered\nis exposed to use in scripts and commands. Make sure you acknowledge these security implications before using them. Secure options are available for use in scripts and command like any other option value:")]),e._v(" "),a("ul",[a("li",[e._v("as plaintext arguments using "),a("code",[e._v("${option.name}")]),e._v(" "),a("ul",[a("li",[e._v("Using the option value as an argument to a command could expose the plaintext value in the system process table")])])]),e._v(" "),a("li",[e._v("as plaintext environment variables in remote and local script execution as "),a("code",[e._v("$RDoptionNAME")]),e._v(" "),a("ul",[a("li",[e._v("Local and possibly remote scripts may be passed this value into their environment")])])]),e._v(" "),a("li",[e._v("as plaintext tokens expanded in remote scripts as "),a("code",[e._v("@option.name@")]),e._v(".\n"),a("ul",[a("li",[e._v("Inline Script workflow "),a("em",[e._v("steps")]),e._v(" that contain a token expansion will be expanded into a temporary file, and the temp file will contain the plaintext option value.")])])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("When passed as arguments to "),a("em",[e._v("Job")]),e._v(" References, they can only be passed as the value of another Secure option. See "),a("RouterLink",{attrs:{to:"/en/user-guide/job-options.html#using-secure-options-with-job-references"}},[e._v("Using Secure Options with "),a("em",[e._v("Job")]),e._v(" References")]),e._v(".")],1)]),e._v(" "),a("h3",{attrs:{id:"secure-remote-authentication-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#secure-remote-authentication-options"}},[e._v("#")]),e._v(" Secure Remote Authentication Options")]),e._v(" "),a("p",[e._v("The built-in "),a("RouterLink",{attrs:{to:"/en/administration/projects/node-execution/ssh.html"}},[e._v("SSH Provider")]),e._v(" for "),a("em",[e._v("node")]),e._v(" execution allows using passwords for SSH and/or Sudo authentication mechanisms, and the passwords are supplied by Secure Remote Authentication Options defined in a "),a("em",[e._v("Job")]),e._v(".")],1),e._v(" "),a("p",[e._v("Secure Remote Authentication Options have some limitations compared to Plain and Secure options:")]),e._v(" "),a("ul",[a("li",[e._v("The values entered by the user are not available for normal script and command option value expansion. This means that they can only be used for the purposes of the Remote Authentication.")])]),e._v(" "),a("h3",{attrs:{id:"using-secure-options-with-job-references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-secure-options-with-job-references"}},[e._v("#")]),e._v(" Using Secure Options with "),a("em",[e._v("Job")]),e._v(" References")]),e._v(" "),a("p",[e._v("When you "),a("RouterLink",{attrs:{to:"/en/user-guide/node-steps/builtin.html#job-reference-step"}},[e._v("define a "),a("em",[e._v("Job")]),e._v(" Reference "),a("em",[e._v("step")]),e._v(" in a workflow")]),e._v(", you can specify the arguments that are passed to it. You can pass Secure Option values and Secure Remote Authentication Option values from a top-level "),a("em",[e._v("job")]),e._v(" to a "),a("em",[e._v("Job")]),e._v(" Reference, but option values "),a("em",[e._v("cannot be passed into another option of a different type")]),e._v(". So a parent "),a("em",[e._v("job")]),e._v(" can only pass option values to the "),a("em",[e._v("Job")]),e._v(" reference if the option type is the same between the "),a("em",[e._v("jobs")]),e._v(".")],1),e._v(" "),a("p",[e._v("This constraint is to maintain the security design of these options:")]),e._v(" "),a("ol",[a("li",[e._v("Secure options should not to be stored in the execution database, so must not be used as plain option values.")]),e._v(" "),a("li",[e._v("Secure Remote Authentication options should not be used in scripts/commands, so must not be used as Secure or Plain option values.")])]),e._v(" "),a("p",[e._v("As an example, here is are two "),a("em",[e._v("jobs")]),e._v(", "),a("em",[e._v("Job")]),e._v(" A and "),a("em",[e._v("Job")]),e._v(" B, which define some options:")]),e._v(" "),a("ul",[a("li",[a("em",[e._v("Job")]),e._v(" A\n"),a("ul",[a("li",[e._v('Option "plain1" - Plain')]),e._v(" "),a("li",[e._v('Option "secure1" - Secure')]),e._v(" "),a("li",[e._v('Option "auth1" - Secure remote authentication')])])]),e._v(" "),a("li",[a("em",[e._v("Job")]),e._v(" B\n"),a("ul",[a("li",[e._v('Option "plain2" - Plain')]),e._v(" "),a("li",[e._v('Option "secure2" - Secure')]),e._v(" "),a("li",[e._v('Option "auth2" - Secure remote authentication')])])])]),e._v(" "),a("p",[e._v("If "),a("em",[e._v("Job")]),e._v(" A defines a "),a("em",[e._v("Job")]),e._v(" reference to call "),a("em",[e._v("Job")]),e._v(" B, then the only valid mapping is shown below:")]),e._v(" "),a("ul",[a("li",[e._v("plain1 -> plain2")]),e._v(" "),a("li",[e._v("secure1 -> secure2")]),e._v(" "),a("li",[e._v("auth1 -> auth2")])]),e._v(" "),a("p",[e._v("So the arguments for the "),a("em",[e._v("Job")]),e._v(" Reference might look like this:")]),e._v(" "),a("ul",[a("li",[e._v("plain2 ${option.plain1}")]),e._v(" "),a("li",[e._v("secure2 ${option.secure1}")]),e._v(" "),a("li",[e._v("auth2 ${option.auth1}")])]),e._v(" "),a("blockquote",[a("p",[e._v("Note, If you define arguments in the wrong manner, then the Secure and Secure Remote Authentication options will not be set when the "),a("em",[e._v("Job")]),e._v(" reference is called. Plain options will behave the way they do in Command or Script arguments, and be left as-is as uninterpreted property references.")])]),e._v(" "),a("h3",{attrs:{id:"secure-options-using-key-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#secure-options-using-key-storage"}},[e._v("#")]),e._v(" Secure Options using Key Storage")]),e._v(" "),a("p",[e._v("Secure options can specify a Storage Path in lieu of a default value. This path to the "),a("RouterLink",{attrs:{to:"/en/administration/security/key-storage.html"}},[e._v("Key Storage Facility")]),e._v("\nwill be loaded as the option value when one is not supplied.")],1),e._v(" "),a("p",[e._v("The path must indicate a stored "),a("code",[e._v("password")]),e._v(" entry in the storage facility.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/jobs-options-secure-storage-path.png",alt:"Storage Path for Secure Option"}})]),e._v(" "),a("h2",{attrs:{id:"remote-option-values"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remote-option-values"}},[e._v("#")]),e._v(" Remote option values")]),e._v(" "),a("p",[e._v("A model of option values can be retrieved from an external source called an "),a("em",[e._v("option model provider")]),e._v(". When the "),a("code",[e._v("valuesUrl")]),e._v(" is specified for an Option, then the model of allowed values is retrieved from the specified URL.")]),e._v(" "),a("p",[e._v("This is useful in a couple of scenarios when is used to coordinate process that depend on other systems:")]),e._v(" "),a("ul",[a("li",[e._v("Deploying packages or artifacts produced by a build or CI server, e.g. Jenkins.\n"),a("ul",[a("li",[e._v("A list of recent Jenkins build artifacts can be imported as Options data, so that a User can pick an appropriate package name to deploy from a list.")])])]),e._v(" "),a("li",[e._v("Selecting from a set of available environments, defined in a CMDB")]),e._v(" "),a("li",[e._v("Any situation in which input variables for your "),a("em",[e._v("Jobs")]),e._v(" must be selected from some set of values produced by a different system.")])]),e._v(" "),a("h2",{attrs:{id:"option-model-provider"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#option-model-provider"}},[e._v("#")]),e._v(" Option model provider")]),e._v(" "),a("p",[e._v("The Option model provider is a mechanism to allow the Options defined for a "),a("em",[e._v("Job")]),e._v(" to have some of the possible input values provided by a remote service or database.")]),e._v(" "),a("p",[e._v("Option model providers are configured on a per-Option basis (where a "),a("em",[e._v("Job")]),e._v(" may have zero or more Options).")]),e._v(" "),a("h3",{attrs:{id:"requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),a("ol",[a("li",[e._v("Options model data must be "),a("a",{attrs:{href:"http://www.json.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSON formatted"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("li",[e._v("It must be accessible via HTTP(S) or on the local disk for the server.")]),e._v(" "),a("li",[e._v("It must be in one of two JSON structures, "),a("em",[e._v("either")]),e._v(":\n"),a("ul",[a("li",[e._v("An array of string values")]),e._v(" "),a("li",[e._v("OR, an array of Maps, each with two entries, "),a("code",[e._v("name")]),e._v(" and "),a("code",[e._v("value")]),e._v(".")])])]),e._v(" "),a("li",[e._v("By default, the HTTP(S) response must include the "),a("code",[e._v("application/json")]),e._v(" content type in the header.\nIn case this cannot be controlled, the attribute "),a("code",[e._v("project.jobs.disableRemoteOptionJsonCheck")]),e._v(" can be set to "),a("code",[e._v("true")]),e._v(" in the project settings.")])]),e._v(" "),a("h3",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),a("p",[e._v("Each Option entry for a "),a("em",[e._v("Job")]),e._v(" can be configured to get the set of possible values from a remote URL. If you are authoring the "),a("em",[e._v("Jobs")]),e._v(" via "),a("RouterLink",{attrs:{to:"/en/user-guide/document-format-reference/job-v20.html#option"}},[a("em",[e._v("job")]),e._v(".xml file format")]),e._v(", simply add a "),a("code",[e._v("valuesUrl")]),e._v(" attribute for the "),a("code",[e._v("<option>")]),e._v(". If you are modifying the "),a("em",[e._v("Job")]),e._v(' in the web GUI, you can entry a URL in the "Remote URL" field for the Option.')],1),e._v(" "),a("p",[e._v("e.g.:")]),e._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("option")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("valuesUrl")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("http://site.example.com/values.json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("...")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("/>")])]),e._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("File URL scheme is also acceptable (e.g, "),a("code",[e._v("file:/path/to/job/options/optA.json")]),e._v(").")])]),e._v(" "),a("p",[e._v("The value data must be returned in JSON data format described below.")]),e._v(" "),a("h3",{attrs:{id:"json-format"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#json-format"}},[e._v("#")]),e._v(" JSON format")]),e._v(" "),a("p",[e._v("Three styles of return data are supported: simple list, simple object, and a name/value list. For a simple list, the list values will be displayed in a pop-up list when running the "),a("em",[e._v("Job")]),e._v(". If a simple object or name/value pairs are returned, then the "),a("code",[e._v("name")]),e._v(" will be displayed in the list, but the "),a("code",[e._v("value")]),e._v(" will be used as the input.")]),e._v(" "),a("h3",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[e._v("#")]),e._v(" Examples")]),e._v(" "),a("p",[e._v("Simple List:")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"x value for test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"y value for test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),a("p",[e._v("This will populate the select menu with the given values.")]),e._v(" "),a("p",[e._v("Simple Object:")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Name1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"value1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Name2"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"value2"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("This will populate the select menu to show the names and use the values.")]),e._v(" "),a("p",[e._v("Name Value List:")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"X Label"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"x value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Y Label"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"y value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"A Label"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"a value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),a("p",[e._v("For multivalued options, if the result is a list of objects and some have a "),a("code",[e._v("selected")]),e._v(" property of "),a("code",[e._v("true")]),e._v(", those values will be selected by default.")]),e._v(" "),a("p",[e._v("For a single valued option, the first result with "),a("code",[e._v("selected=true")]),e._v(" will be selected (if any).")]),e._v(" "),a("p",[e._v("Name Value List with default selections:")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"X Label"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"x value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"selected"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Y Label"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"y value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"A Label"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"a value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"selected"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),a("h3",{attrs:{id:"url-connection-parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-connection-parameters"}},[e._v("#")]),e._v(" URL connection parameters")]),e._v(" "),a("p",[e._v("You can configure timeouts globally as described in "),a("RouterLink",{attrs:{to:"/en/administration/configuration/config-file-reference.html#config.properties"}},[e._v("Configuration - "),a("em",[e._v("Job")]),e._v(" Remote Option URL connection parameters")]),e._v(".")],1),e._v(" "),a("p",[e._v("You can also specify these connection parameters on a per-URL basis:")]),e._v(" "),a("p",[a("code",[e._v("timeout")]),e._v("\n: socket timeout in seconds")]),e._v(" "),a("p",[a("code",[e._v("contimeout")]),e._v("\n: connection timeout in seconds")]),e._v(" "),a("p",[a("code",[e._v("retry")]),e._v("\n: retry count if no response from server")]),e._v(" "),a("p",[e._v('To set this in an Option\'s remote URL, add them as the "fragment" portion of the URL, after the '),a("code",[e._v("#")]),e._v(" character like so:")]),e._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("http:")]),e._v("//host/mypath#timeout=60;contimeout=5;retry=1\n")])])]),a("p",[e._v("Use "),a("code",[e._v("key=value")]),e._v(" for a parameter, and separate multiple parameters with the "),a("code",[e._v(";")]),e._v(" character.")]),e._v(" "),a("h3",{attrs:{id:"cascading-remote-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cascading-remote-options"}},[e._v("#")]),e._v(" Cascading Remote Options")]),e._v(" "),a("p",[e._v("Cascading options allow an option's Remote values URL to embed the values entered by the user for other options when executing a "),a("em",[e._v("Job")]),e._v(". When the user enters or selects a value for one of the other options, then the remote JSON is refreshed for the current option.")]),e._v(" "),a("p",[e._v("This provides a mechanism for declaring hierarchical or dependent sets of option values.")]),e._v(" "),a("p",[e._v('E.g. if you wanted one option to choose a "repository", and another option to select a specific "branch" within that repository. Define your option provider to respond correctly based on the selected "repository" value, and define your Remote option URL to include a reference to the "repository" option value. The GUI will then reload the JSON values from the remote URL and insert the correct value of the "repository" option when loading the "branch" option values. If the user changes the selected repository, then the branch values will be automatically refreshed.')]),e._v(" "),a("p",[e._v("You can declare a dependency of one option to another by embedding property references within the remote values URL. The property reference is of the form "),a("code",[e._v("${option.[name].value}")]),e._v(". If you declare an option with a remote values URL like "),a("code",[e._v("http://server/options?option2=${option.option2.value}")]),e._v(', then that option will depend on the value of the "option2" option.')]),e._v(" "),a("p",[e._v("In the GUI, when the options are loaded, option2 will be shown first, and the remote values for option1 will only be loaded once a value has been selected for option2, and the value will be placed in the URL when it is loaded.")]),e._v(" "),a("p",[e._v('If an option has dependencies on other options that do not have a value set, then the embedded references will evaluate to "" (empty string) when loading\nthe URL.')]),e._v(" "),a("p",[e._v("If an option has dependencies on other options and the remote values "),a("RouterLink",{attrs:{to:"/en/user-guide/job-options.html#json-format"}},[e._v("JSON data")]),e._v(" is empty (empty list or empty object), then the option shown in the GUI will indicate that the user should select values for the necessary options. This allows Option model providers to indicate that some or all of the dependent option values are necessary for the current option before showing the input for the option.")],1),e._v(" "),a("p",[e._v("It is possible to have dependencies on more than one option, and any change to one of the dependencies will cause the option values to be reloaded from the remote URL.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("It is also possible to declare a cycle of dependencies between option values, which will cause the automatic reloading to be disabled. In this case the user must manually click the reload button to reload the option values if a dependency has changed.")])]),e._v(" "),a("h3",{attrs:{id:"variable-expansion-in-remote-urls"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#variable-expansion-in-remote-urls"}},[e._v("#")]),e._v(" Variable expansion in remote URLs")]),e._v(" "),a("p",[e._v('The URL declared for the "valuesUrl" can embed variables which will be filled with certain '),a("em",[e._v("job")]),e._v(" context items when making the remote request. This helps make the URLs more generic and contextual to the "),a("em",[e._v("Job")]),e._v(".")]),e._v(" "),a("p",[e._v("Two types of expansions are available, "),a("em",[e._v("Job")]),e._v(" context, and Option context.")]),e._v(" "),a("p",[e._v("To include "),a("em",[e._v("job")]),e._v(" information in the URL, specify a variable of the form "),a("code",[e._v("${job.property}")]),e._v(".")]),e._v(" "),a("p",[e._v("Properties available for "),a("em",[e._v("Job")]),e._v(" context:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("name")]),e._v(": Name of the "),a("em",[e._v("Job")])]),e._v(" "),a("li",[a("code",[e._v("group")]),e._v(": Group of the "),a("em",[e._v("Job")])]),e._v(" "),a("li",[a("code",[e._v("description")]),e._v(": "),a("em",[e._v("Job")]),e._v(" description")]),e._v(" "),a("li",[a("code",[e._v("project")]),e._v(": Project name")]),e._v(" "),a("li",[a("code",[e._v("user.name")]),e._v(": User executing the "),a("em",[e._v("job")])]),e._v(" "),a("li",[a("code",[e._v("google.nodename")]),e._v(": Name of the server "),a("em",[e._v("node")])]),e._v(" "),a("li",[a("code",[e._v("google.serverUUID")]),e._v(": UUID of the server "),a("em",[e._v("node")]),e._v(" (cluster mode)")]),e._v(" "),a("li",[a("code",[e._v("google.basedir")]),e._v(": File path of the base dir ("),a("code",[e._v("file://")]),e._v(" URLs only)")])]),e._v(" "),a("p",[e._v("Additionally the "),a("code",[e._v("google.*")]),e._v(" properties can be specified without the "),a("code",[e._v("job.")]),e._v(" prefix, e.g. "),a("code",[e._v("${google.basedir}")]),e._v(".")]),e._v(" "),a("p",[e._v("To include Option information in the URL, specify a variable of the form ${option.property}:")]),e._v(" "),a("p",[e._v("Properties available for Option context:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("name")]),e._v(": Name of the current option")])]),e._v(" "),a("p",[e._v("To include "),a("a",{attrs:{href:"/en/user-guide/job-options#cascading-remote-options"}},[e._v("Cascading remote option")]),e._v(" values information in the URL, specify a variable of the form ${option.name.value}:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("option.[name].value")]),e._v(': substitutes the selected value of another option by name. If the option is not set, then a blank string ("") will be substituted.')])]),e._v(" "),a("p",[a("em",[a("strong",[e._v("Examples")])])]),e._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("http:")]),e._v("//server.com/test?name=${option.name}\n")])])]),a("p",[e._v('Passes the option name as the "name" query parameter to the URL.')]),e._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("http:")]),e._v("//server.com/test?jobname=${job.name}&jobgroup=${job.group}\n")])])]),a("p",[e._v("Passes the "),a("em",[e._v("job")]),e._v(" name and group as query parameters.")]),e._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("http:")]),e._v("//server.com/branches?repository=${option.repository.value}\n")])])]),a("p",[e._v('Passes the value of the selected "repository" option, or "" (blank) if it is not set. This option becomes a dependent of the "repository" option, and if the "repository" value changes, the remote option values for this option will be reloaded.')]),e._v(" "),a("h3",{attrs:{id:"remote-request-failures"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remote-request-failures"}},[e._v("#")]),e._v(" Remote request failures")]),e._v(" "),a("p",[e._v("If the request for the remote option values fails, then the GUI form will display a warning message:")]),e._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/fig0901.png",alt:"fig0901"}})]),e._v(" "),a("p",[e._v("In this case, the option will be allowed to use a textfield to set the value.")]),e._v(" "),a("h2",{attrs:{id:"linking-to-jobs-and-providing-option-values"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linking-to-jobs-and-providing-option-values"}},[e._v("#")]),e._v(" Linking to "),a("em",[e._v("Jobs")]),e._v(" and providing option values")]),e._v(" "),a("p",[e._v("You can create a URL to link to a specific "),a("em",[e._v("Job")]),e._v(", and pre-fill some of the option values by adding URL query parameters to the "),a("em",[e._v("Job")]),e._v("'s URL.")]),e._v(" "),a("p",[e._v("Query Parameters format for options:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("opt.NAME")]),e._v(": provide a value for an option named "),a("code",[e._v("NAME")])])]),e._v(" "),a("p",[e._v("For example, if the URL for the "),a("em",[e._v("Job")]),e._v(" is:")]),e._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("http:")]),e._v("//localhost:4440/project/MyProject/job/show/ab698597-9753-4e98-bdab-90ebf395b0d0\n")])])]),a("p",[e._v("Then you can pre-fill the values for "),a("code",[e._v("myopt1")]),e._v(" and "),a("code",[e._v("myotheropt")]),e._v(" by appending this to the URL:")]),e._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[e._v("?opt.myopt1=some+value&opt.myotheropt=another+value\n")])])]),a("p",[e._v("The result would be:")]),e._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("http:")]),e._v("//localhost:4440/project/MyProject/job/show/ab698597-9753-4e98-bdab-90ebf395b0d0?opt.myopt1=some+value&opt.myotheropt=another+value\n")])])]),a("p",[e._v("Note: be sure to properly escape the strings for option values, and if necessary for the option names as well.")])])}),[],!1,null,null,null);t.default=o.exports}}]);