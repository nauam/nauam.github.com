<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fluxo de trabalho | Documentos</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/images/logo-black.png">
    <meta name="description" content="Ainda assim, existem dúvidas a respeito de como o julgamento imparcial das eventualidades aponta para a melhoria das formas de ação.">
    
    <link rel="preload" href="/assets/css/0.styles.d331a4a6.css" as="style"><link rel="preload" href="/assets/js/app.94749c3b.js" as="script"><link rel="preload" href="/assets/js/2.ed82773e.js" as="script"><link rel="preload" href="/assets/js/20.9bf6df9a.js" as="script"><link rel="prefetch" href="/assets/js/10.c12c89e6.js"><link rel="prefetch" href="/assets/js/11.33668774.js"><link rel="prefetch" href="/assets/js/12.2d1c71c1.js"><link rel="prefetch" href="/assets/js/13.ecc44a5b.js"><link rel="prefetch" href="/assets/js/14.ae938c59.js"><link rel="prefetch" href="/assets/js/15.dce3c346.js"><link rel="prefetch" href="/assets/js/16.7e1105c9.js"><link rel="prefetch" href="/assets/js/17.01901013.js"><link rel="prefetch" href="/assets/js/18.4550a5c4.js"><link rel="prefetch" href="/assets/js/19.c61e76be.js"><link rel="prefetch" href="/assets/js/21.840f5536.js"><link rel="prefetch" href="/assets/js/22.f7139545.js"><link rel="prefetch" href="/assets/js/3.8ad0696f.js"><link rel="prefetch" href="/assets/js/4.acea1853.js"><link rel="prefetch" href="/assets/js/5.80c84993.js"><link rel="prefetch" href="/assets/js/6.e2fb9f94.js"><link rel="prefetch" href="/assets/js/7.10ae753f.js"><link rel="prefetch" href="/assets/js/8.fbecdb9d.js"><link rel="prefetch" href="/assets/js/9.5c45180b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d331a4a6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentos</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Introdução" class="dropdown-title"><span class="title">Introdução</span> <span class="arrow down"></span></button> <button type="button" aria-label="Introdução" class="mobile-dropdown-title"><span class="title">Introdução</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/introduction/introduction.html" class="nav-link">
  Introdução
</a></li><li class="dropdown-item"><!----> <a href="/introduction/getting-help.html" class="nav-link">
  Conseguindo Ajuda
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guia do Usuário" class="dropdown-title"><span class="title">Guia do Usuário</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guia do Usuário" class="mobile-dropdown-title"><span class="title">Guia do Usuário</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/user-guide/projects.html" class="nav-link">
  Projetos
</a></li><li class="dropdown-item"><!----> <a href="/user-guide/jobs.html" class="nav-link">
  Jobs
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linguagens" class="dropdown-title"><span class="title">Linguagens</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linguagens" class="mobile-dropdown-title"><span class="title">Linguagens</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/user-guide/job-workflows.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Português
</a></li><li class="dropdown-item"><!----> <a href="/en/user-guide/job-workflows.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Introdução" class="dropdown-title"><span class="title">Introdução</span> <span class="arrow down"></span></button> <button type="button" aria-label="Introdução" class="mobile-dropdown-title"><span class="title">Introdução</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/introduction/introduction.html" class="nav-link">
  Introdução
</a></li><li class="dropdown-item"><!----> <a href="/introduction/getting-help.html" class="nav-link">
  Conseguindo Ajuda
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guia do Usuário" class="dropdown-title"><span class="title">Guia do Usuário</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guia do Usuário" class="mobile-dropdown-title"><span class="title">Guia do Usuário</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/user-guide/projects.html" class="nav-link">
  Projetos
</a></li><li class="dropdown-item"><!----> <a href="/user-guide/jobs.html" class="nav-link">
  Jobs
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linguagens" class="dropdown-title"><span class="title">Linguagens</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linguagens" class="mobile-dropdown-title"><span class="title">Linguagens</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/user-guide/job-workflows.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Português
</a></li><li class="dropdown-item"><!----> <a href="/en/user-guide/job-workflows.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guia do Usuário</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/user-guide/projects.html" class="sidebar-link">Projetos</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/user-guide/jobs" class="sidebar-heading clickable open"><span>Jobs</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/user-guide/jobs.html" class="sidebar-link">Jobs</a></li><li><a href="/user-guide/creating-jobs.html" class="sidebar-link">Criação de jobs</a></li><li><a href="/user-guide/job-workflows.html" aria-current="page" class="active sidebar-link">Fluxo de trabalho</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/user-guide/job-workflows.html#definicao-de-fluxo-de-trabalho" class="sidebar-link">Definição de fluxo de trabalho</a></li><li class="sidebar-sub-header"><a href="/user-guide/job-workflows.html#configuracoes-de-controle-de-fluxo-de-trabalho" class="sidebar-link">Configurações de controle de fluxo de trabalho</a></li><li class="sidebar-sub-header"><a href="/user-guide/job-workflows.html#passos-do-fluxo-de-trabalho" class="sidebar-link">Passos do fluxo de trabalho</a></li><li class="sidebar-sub-header"><a href="/user-guide/job-workflows.html#reordenando-passos" class="sidebar-link">Reordenando passos</a></li><li class="sidebar-sub-header"><a href="/user-guide/job-workflows.html#manipuladores-de-erro" class="sidebar-link">Manipuladores de erro</a></li><li class="sidebar-sub-header"><a href="/user-guide/job-workflows.html#salve-as-alteracoes" class="sidebar-link">Salve as alterações</a></li><li class="sidebar-sub-header"><a href="/user-guide/job-workflows.html#variaveis-​​de-contexto" class="sidebar-link">Variáveis ​​de Contexto</a></li></ul></li><li><a href="/user-guide/job-options.html" class="sidebar-link">Opções de Job</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="fluxo-de-trabalho"><a href="#fluxo-de-trabalho" class="header-anchor">#</a> Fluxo de trabalho</h1> <p>O recurso mais básico do <em>Job</em> é a capacidade de executar um ou mais
passos. Esta sequência de passos é chamada de <em>fluxo de trabalho</em>.</p> <p>Os passos do fluxo de trabalho de um <em>Job</em> são exibidos ao visualizar o detalhes do <em>Job</em>
em uma lista de <em>Job</em> ou no formulário do editor de <em>Job</em>.</p> <h2 id="definicao-de-fluxo-de-trabalho"><a href="#definicao-de-fluxo-de-trabalho" class="header-anchor">#</a> Definição de fluxo de trabalho</h2> <p>Os fluxos de trabalho podem ser definidos no console gráfico da ou como um
Documento XML ou YAML que é carregado no servidor.</p> <p>O console gráfico fornece um ambiente de autoria onde passos
pode ser adicionado, editado, removido ou reordenado.</p> <p>Os usuários que preferem definir <em>Jobs</em> em formato de texto devem consultar as duas definições de formato:</p> <ul><li>XML: <a href="/user-guide/document-format-reference/job-v20.html">job-xml</a></li> <li>YAML: <a href="/user-guide/document-format-reference/job-yaml-v12.html">job-yaml</a></li></ul> <p>Também é possível criar <em>Jobs</em> dentro do console gráfico
e, em seguida, exportar a definição como um arquivo usando o <code>rd</code>,
Ferramenta CLI (<a href="https://google.github.io/cli/" target="_blank" rel="noopener noreferrer">rd<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>), ou via API.</p> <p>Consulte <a href="/user-guide/job-workflows.html#ferramentas-de-linha-de-comando-e-acesso-a-api">Ferramentas de linha de comando e acesso à API</a>.</p> <h2 id="configuracoes-de-controle-de-fluxo-de-trabalho"><a href="#configuracoes-de-controle-de-fluxo-de-trabalho" class="header-anchor">#</a> Configurações de controle de fluxo de trabalho</h2> <p>A execução do fluxo de trabalho é controlada por duas configurações importantes: <em>Manuseio de um passo falhar</em> e <em>Estratégia</em>.</p> <p><img src="/assets/img/fig0401.png" alt="Workflow controls"></p> <p><em>Se um passo falhar</em>: gerencia o que fazer se um passo incorrer em um erro:</p> <ul><li>Pare no passo com falha: Falha imediatamente (padrão).</li> <li>Execute os passos restantes antes de falhar: Continue para os próximos passos e falhe o <em>job</em> no final.</li></ul> <p>O padrão é falhar imediatamente, mas dependendo do procedimento em
mão você pode escolher que a execução continue.</p> <p><em>Estratégia</em>: Controla a ordem de execução de passos e o comando
despachar para o <em>nós</em>: <em>Node-oriented</em> e <em>Step-oriented</em>.</p> <ul><li><em>Primeiro nó</em>: executa o fluxo de trabalho completo em cada <em>nó</em> antes do
próximo <em>nó</em>. (predefinição)</li> <li><em>Sequential</em>: executa cada passo em todos os <em>nós</em> antes do próximo
<em>Passo</em>.</li> <li><em>Paralelo</em>: Execute todos os passos em paralelo.</li></ul> <p>As ilustrações a seguir contrastam as estratégias, mostrando como três
passos prossiga em dois <em>nós</em>.</p> <p><em>Primeiro nó</em> fluxo ilustrado:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token number">1</span>. NóA  passo<span class="token comment">#1</span>
<span class="token number">2</span>.  <span class="token string">&quot;   passo#2
3.  &quot;</span>   passo<span class="token comment">#3</span>
<span class="token number">4</span>. NóB  passo<span class="token comment">#1</span>
<span class="token number">5</span>.  <span class="token string">&quot;   passo#2
6.  &quot;</span>   passo<span class="token comment">#3</span>
</code></pre></div><p>Fluxo <em>sequencial</em> ilustrado:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token number">1</span>. NóA  passo<span class="token comment">#1</span>
<span class="token number">2</span>. NóB     <span class="token string">&quot;
3. NóA  passo#2
4. NóB     &quot;</span>
<span class="token number">5</span>. NóA  passo<span class="token comment">#3</span>
<span class="token number">6</span>. NóB     &quot;
</code></pre></div><p>O processo que você está automatizando determinará qual estratégia é
correto, embora o fluxo orientado a <em>nó</em> seja mais comum.</p> <p>Para regras de estratégia de fluxo de trabalho mais complexas, consulte <a href="/user-guide/workflow-Strategies/ruleset.html">Ruleset Workflow Strategy Plugin</a></p> <h2 id="passos-do-fluxo-de-trabalho"><a href="#passos-do-fluxo-de-trabalho" class="header-anchor">#</a> Passos do fluxo de trabalho</h2> <p>As seções a seguir descrevem como construir um fluxo de trabalho como um conjunto
de passos de diferentes tipos.</p> <p>Ao criar uma nova definição de <em>Job</em>, o formulário de fluxo de trabalho será definido com
padrões e não têm passos de fluxo de trabalho definidos. O editor de fluxo de trabalho irá
tenha um formulário aberto pedindo para escolher um tipo de passo para adicionar.</p> <p><img src="/assets/img/fig0402.png" alt="Add a passo"></p> <p>Para adicionar um novo passos, basta clicar no link &quot;Adicionar um passo&quot; dentro do fluxo de trabalho
forma de editor. Isso irá mostrar-lhe uma caixa de diálogo perguntando qual tipo de
passo que você gostaria de adicionar. Cada tipo de passo tem seu próprio
Formato. Quando terminar de preencher o formulário, pressione &quot;Salvar&quot; para adicioná-lo
para a sequência. Pressionar &quot;Cancelar&quot; fechará o formulário e sairá do
sequência inalterada.</p> <p><img src="/assets/img/fig0403.png" alt="Adicionar um formulário de passo"></p> <p>Novos passos são sempre adicionados ao final da sequência. Ver
[Reordenando <em>etapas</em>](/# reordenando-passos)
para obter instruções sobre como mover passos para uma nova ordem.</p> <p>Cada passo pode ter uma &quot;Descrição&quot; para dar a ele um nome ou descrição mais lógico a ser exibido na GUI da .</p> <p>As próximas seções descrevem a especificação de cada tipo de
workflow passo.</p> <h3 id="tipos-de-passos"><a href="#tipos-de-passos" class="header-anchor">#</a> Tipos de Passos</h3> <p>Os passos em um fluxo de trabalho podem ser <em>Passos do nó</em> ou <em>Passos do fluxo de trabalho</em>.</p> <ul><li><em>Passos do nó</em> opera uma vez em cada <em>Nó</em>, o que pode ocorrer várias vezes em um fluxo de trabalho. Para obter uma lista completa de <em>Passos do nó</em>, consulte <a href="/user-guide/job-plugins.html#passos-do-no"><em>Passos do nó</em></a></li> <li><em>Passos do fluxo de trabalho</em> opera apenas uma vez no fluxo de trabalho. Para obter uma lista completa de <em>Passos do fluxo de trabalho</em>, consulte <a href="/user-guide/job-plugins.html#passos-do-fluxo-de-trabalho"><em>Passos do fluxo de trabalho</em></a></li></ul> <h2 id="reordenando-passos"><a href="#reordenando-passos" class="header-anchor">#</a> Reordenando passos</h2> <p>A ordem dos passos do Fluxo de Trabalho pode ser modificada passando o mouse sobre qualquer
passo e, em seguida, clicando e arrastando o ícone de seta dupla para o
posição desejada.</p> <p><img src="/assets/img/fig0408.png" alt="Tarefa passo reordenar"></p> <p>Uma barra horizontal azul ajuda a destacar a posição
onde o <em>Job</em> vai pousar.</p> <p><img src="/assets/img/fig0408a.png" alt="Trabalho passo reordenar"></p> <p>Depois de liberar o <em>Job</em> selecionado, ele pousará na posição desejada
e o pedido passo será atualizado.</p> <p>Se você deseja desfazer a passo reordenação, pressione o link &quot;Desfazer&quot; acima
os passos.</p> <p>O botão &quot;Refazer&quot; pode ser pressionado para reaplicar a última alteração desfeita.</p> <p>Pressione o botão &quot;Reverter todas as alterações&quot; para voltar à ordem passo original.</p> <h2 id="manipuladores-de-erro"><a href="#manipuladores-de-erro" class="header-anchor">#</a> Manipuladores de erro</h2> <p>Cada passo em um fluxo de trabalho pode ter uma ação &quot;Manipulador de erros&quot; associada. Este manipulador
é um passo secundário de qualquer um dos tipos disponíveis que será executado se o passo do fluxo de trabalho falha. Os passos do Error Handler podem ser usados ​​para recuperar o fluxo de trabalho de uma falha ou
simplesmente para executar uma ação secundária.</p> <p>Isso fornece algumas maneiras diferentes de lidar com uma falha de passo:</p> <ul><li>Imprima informações adicionais sobre uma falha</li> <li>Reverter uma mudança</li> <li>Recupere o fluxo de trabalho de falhas e continue normalmente</li></ul> <p>Quando um passo do fluxo de trabalho falha, o comportamento depende se ele tem um manipulador de erros ou não,
e o valor da configuração &quot;keepgoing&quot; para o fluxo de trabalho e o valor de &quot;keepgoingOnSuccess&quot; para o manipulador de erros.</p> <ul><li>Quando um passo falha <strong>sem um manipulador de erros</strong> <ol><li>) fluxo de trabalho é marcado como &quot;falhou&quot;</li> <li>Se <code>keepgoing = &quot;false&quot;</code> <ol><li>então todo o fluxo de trabalho para</li></ol></li> <li>Caso contrário, as etapas restantes do fluxo de trabalho são executadas em ordem</li> <li>O fluxo de trabalho termina com um status de resultado de &quot;falha&quot;</li></ol></li></ul> <p>Se você definir um manipulador de erros para um passo, o comportamento mudará. O manipulador pode recuperar a falha do passo executando com sucesso, e uma opção secundária &quot;keepgoingOnSuccess&quot;
permitem que você substitua o valor &quot;keepgoing&quot; do fluxo de trabalho se ele for falso.</p> <ul><li>Quando um passo falha <strong>com um manipulador de erros</strong> <ol><li>O manipulador de erros é executado</li> <li>Se o manipulador de erros foi bem-sucedido e <code>keepgoingOnSuccess = &quot;true&quot;</code> <ol><li>O fluxo de trabalho <code>keepgoing</code> é ignorado,</li> <li>O status de falha do fluxo de trabalho não está marcado e continuará no próxima passo</li></ol></li> <li>Caso contrário, se <code>keepgoing = &quot;false&quot;</code> <ol><li>O fluxo de trabalho está marcado como &quot;falhou&quot;</li> <li>Então, todo o fluxo de trabalho para</li></ol></li> <li>Caso contrário, se <code>keepgoing = &quot;true&quot;</code> <ol><li>Se o manipulador de erros falhou, o fluxo de trabalho é marcado como &quot;falhou&quot;</li> <li>Caso contrário, o Fluxo de Trabalho não adicionalmente marcado</li></ol></li> <li>os passos do fluxo de trabalho restantes são executados em ordem (incluindo outros manipuladores de erro acionados)</li> <li>quando o fluxo de trabalho termina, seu status depende se ele está marcado</li></ol></li></ul> <p>Essencialmente, o status de resultado do manipulador de erros torna-se o status de resultado de seu passo, se o fluxo de trabalho
tem <code>keepgoing = &quot;true&quot;</code> ou se o manipulador de erros o sobrescrever com <code>keepgoingOnSuccess = &quot;true&quot;</code>. Se o manipulador de erros for bem-sucedido, o passo não será considerado como tendo falhado. Esse
inclui scripts, comandos, referências de <em>job</em>, etc. (Scripts e comandos devem ter um status de saída de <code>0</code> para
sucesso de retorno.)</p> <p>É uma boa prática, ao definir Manipuladores de erro, <strong>sempre</strong> fazer com que eles falhem (por exemplo, scripts/comandos retornam um código de saída diferente de zero), a menos que você queira especificamente que eles sejam usados ​​para recuperação.</p> <div class="custom-block tip"><p class="custom-block-title">DICA</p> <p>Os manipuladores de erros podem ser anexados a <em>Passos do nó</em> ou <em>Passos do fluxo de trabalho</em>, e o tipo de passo e a Estratégia do Fluxo de Trabalho determinam que tipo de passos do manipulador de erros pode ser anexado a um passo. A única restrição é no caso do fluxo de trabalho ser &quot;orientado a <em>Nó</em>&quot;, o que significa que o fluxo de trabalho é executado independentemente para cada <em>nó</em>. Neste caso, <em>Passos do nó</em> só pode ter outros <em>Passos do nó</em> como manipuladores de erro. Em outros casos, o Manipulador de erros pode ser outro <em>Passos do fluxo de trabalho</em>.</p></div> <p>Para adicionar um manipulador de erros, pressione o botão &quot;configurações&quot; no passo que deseja manipular.</p> <p><img src="/assets/img/fig0410.png" alt="Adicionando um manipulador de erros"></p> <p>O formulário apresentado inclui o conjunto normal de passos que você pode adicionar a um fluxo de trabalho.</p> <p><img src="/assets/img/fig0410a.png" alt="Adicionando um manipulador de erros"></p> <p>O exemplo abaixo mostra um manipulador de erros que chama um script por URL.</p> <p><img src="/assets/img/fig0411.png" alt="Exemplo de manipulador de erros"></p> <h3 id="informacao-de-contexto"><a href="#informacao-de-contexto" class="header-anchor">#</a> Informação de contexto</h3> <p>Quando o manipulador de passo erros é executado, seu contexto de execução conterá algumas informações sobre a natureza
da falha que ocorreu para o passo original.</p> <p>No caso em que um <em>Passo do nó</em> tem um <em>Passo do fluxo de trabalho</em> como manipulador de erros, os dados de falha para vários <em>nós</em> são agrupados em um único motivo de falha para ser usado pelo <em>Passo do fluxo de trabalho</em>.</p> <p>Consulte a seção sobre <a href="/user-guide/job-workflows.html#variaveis-​​de-contexto">Variáveis ​​de contexto</a> para obter mais informações.</p> <h2 id="salve-as-alteracoes"><a href="#salve-as-alteracoes" class="header-anchor">#</a> Salve as alterações</h2> <p>Uma vez que as passos do Fluxo de Trabalho foram definidas e ordenadas, as mudanças são
salvo permanentemente após pressionar o botão &quot;Criar&quot; se for novo ou o
Botão &quot;Atualizar&quot; se o <em>Job</em> estiver sendo modificado.</p> <h2 id="variaveis-​​de-contexto"><a href="#variaveis-​​de-contexto" class="header-anchor">#</a> Variáveis ​​de Contexto</h2> <p>Quando um passo do <em>Job</em> é executado, ele possui um conjunto de variáveis ​​de &quot;contexto&quot; que você pode acessar no passo do <em>Job</em>. Existem vários conjuntos de variáveis ​​de contexto, incluindo: o contexto <em>Job</em> <code>job</code>, o contexto <em>Nó</em> <code>node</code>, e a contexto de Opção <code>option</code>.</p> <p><em>Job</em> variáveis ​​de contexto (escopo global):</p> <ul><li><code>job.name</code>: Nome do <em>Job</em></li> <li><code>job.group</code>: Grupo do <em>Job</em></li> <li><code>job.id</code>: ID do <em>Job</em></li> <li><code>job.execid</code>: ID da execução atual</li> <li><code>job.executionType</code>: tipo de execução, pode ser <code>usuário</code>, <code>agendado</code> ou <code>agendado pelo usuário</code> para execuções <code>Executar _Job_ mais tarde</code></li> <li><code>job.username</code>: Nome de usuário do usuário que está executando o <em>Job</em></li> <li><code>job.project</code>: Nome do projeto</li> <li><code>job.loglevel</code>: nível de registro, um de: 'ERROR', 'WARN', 'INFO', 'VERBOSE', 'DEBUG'</li> <li><code>job.user.email</code>: Executando o endereço de e-mail do usuário definido em <a href="/user-guide/10-user.html">Perfil do usuário</a>.</li> <li><code>job.retryAttempt</code>: Um número que indica a tentativa, se esta execução for uma [nova tentativa](/# nova tentativa).</li> <li><code>job.wasRetry</code>:<code>true</code> se esta execução for uma nova tentativa, caso contrário, <code>false</code>. Veja: [repetir](/# nova tentativa).</li> <li><code>job.threadcount</code>: Threadcount (número de <em>nós</em> executados de uma vez) do <em>Job</em></li> <li><code>job.filter</code>: O filtro usado para selecionar os <em>nós</em> para este <em>job</em> (se aplicável)</li></ul> <p>Variáveis ​​de contexto <em>Nó</em> (escopo <em>Nó</em>):</p> <ul><li><code>node.name</code>: Nome do <em>Nó</em> sendo executado em</li> <li><code>node.hostname</code>: Nome do host do <em>Nó</em></li> <li><code>node.username</code>: Nome de usuário do usuário remoto</li> <li><code>node.description</code>: Descrição do <em>nó</em></li> <li><code>node.tags</code>: lista separada por vírgulas de tags</li> <li><code>node.os-*</code>: propriedades do sistema operacional do <em>Nó</em>: <code>name</code>,<code>version</code>,<code>arch</code>,<code>family</code></li> <li><code>node.*</code>: Todos os atributos <em>Nó</em> definidos no <em>Nó</em>.</li></ul> <p>Variáveis ​​de contexto de execução (escopo global):</p> <p>Os dados de execução são incluídos como um mapa denominado execução contendo as seguintes chaves e valores:</p> <ul><li><code>running.id</code>: ID da execução</li> <li><code>running.href</code>: URL para a visualização de saída de execução</li> <li><code>running.status</code>: estado de execução ('em execução', 'falhou', 'abortado', 'com êxito')</li> <li><code>running.user</code>: usuário que iniciou o <em>job</em></li> <li><code>running.dateStarted</code>: hora de início (java.util.Date)</li> <li><code>running.dateStartedUnixtime</code>: hora de início em milissegundos desde a época (longa)</li> <li><code>running.dateStartedW3c</code>: hora de início como uma string formatada em W3C</li> <li><code>running.description</code>: string de resumo para a execução</li> <li><code>running.argstring</code>: string de argumento para qualquer opção de <em>job</em></li> <li><code>running.project</code>: nome do projeto</li> <li><code>running.loglevel</code>: string de nível de log ('ERROR', 'WARN', 'INFO', 'VERBOSE', 'DEBUG')
Os seguintes valores podem estar disponíveis após o <em>job</em> ser concluído (não disponível para o acionador onstart):</li> <li><code>running.failedNodeListString</code>: lista separada por vírgulas de qualquer <em>nós</em> que falhou, se presente</li> <li><code>execution.failedNodeList</code>: Lista Java de quaisquer nomes de <em>nó</em> que falharam, se presente</li> <li><code>execution.succeededNodeListString</code>: lista separada por vírgulas de quaisquer <em>nós</em> que tiveram sucesso, se presente</li> <li><code>execution.succeededNodeList</code>: Lista Java de quaisquer nomes de <em>nó</em> que tiveram sucesso, se presente</li> <li><code>execution.nodestatus</code>: Mapa Java contendo contagens resumidas de <em>nó</em> sucesso/falha/total, na forma: [sucesso: int, falha: int, total: int]</li> <li><code>running.dateEnded</code>: hora de término (java.util.Date)</li> <li><code>running.dateEndedUnixtime</code>: hora de término em milissegundos desde a época (longo)</li> <li><code>running.dateEndedW3c</code>: hora de término como string formatada W3C</li> <li><code>running.abortedby</code>: usuário que abortou a execução</li></ul> <p>Variáveis ​​de contexto adicionais do manipulador de erros (escopo global):</p> <ul><li><code>result.reason</code>: um código que indica a razão da falha do passo
<ul><li>Sequências de código de razão comum usadas por <em>nó</em> execução de comandos ou scripts:
<ul><li><code>NonZeroResultCode</code> - a execução retornou um código diferente de zero</li> <li><code>SSHProtocolFailure</code> - falha do protocolo SSH</li> <li><code>HostNotFound</code> - host não encontrado</li> <li><code>ConnectionTimeout</code> - tempo limite de conexão</li> <li><code>ConnectionFailure</code> - falha de conexão (por exemplo, recusada)</li> <li><code>IOFailure</code> - erro IO</li> <li><code>AuthenticationFailure</code> - autenticação foi recusada ou incorreta</li></ul></li> <li>Strings de código de razão usadas por referências de <em>Job</em> <ul><li><code>JobFailed</code> - o fluxo de trabalho de um <em>Job</em> referenciado falhou</li> <li><code>NotFound</code> - referenciado <em>Job</em> não encontrado</li> <li><code>Unauthorized</code> - referenciado <em>Job</em> não autorizado</li> <li><code>InvalidOptions</code> - opções de entrada <em>Job</em> referenciadas inválidas</li> <li><code>NoMatchedNodes</code> - filtros de despacho <em>Job</em> <em>nó</em> referenciados não tinham correspondência</li></ul></li> <li>Código de razão usado de um <em>Passo do nó</em> com falha se o manipulador for um <em>Passo do fluxo de trabalho</em> <ul><li><code>NodeDispatchFailure</code> - um ou mais <em>nós</em> falharam no passo</li></ul></li></ul></li> <li><code>result.message</code>: uma string que descreve a falha</li> <li><code>result.resultCode</code>: código de saída de uma execução (se disponível)</li> <li><code>result.failedNodes</code>: lista separada por vírgulas de nomes <em>nó</em> que falhou para um <code>NodeDispatchFailure</code></li></ul> <p>Variáveis ​​de contexto de opção são referidas como <code>option.NAME</code> (mais sobre <a href="/user-guide/job-options.html"><em>Job</em> Options</a>.)</p> <p>Pode haver variáveis ​​de contexto adicionais disponíveis, como valores <code>data.*</code> Ao usar os <a href="/user-guide/job-workflows.html#variaveis-​​de-contexto">Plugins de filtro de registro de captura de dados</a>.</p> <h3 id="uso-da-variavel-de-contexto"><a href="#uso-da-variavel-de-contexto" class="header-anchor">#</a> Uso da variável de contexto</h3> <p>Variáveis ​​de contexto podem ser usadas de algumas maneiras em um passo do <em>Job</em>, com sintaxes ligeiramente diferentes:</p> <ul><li><p>Comandos, Argumentos de Script e <em>Job</em> Argumentos de Referência</p> <p>: <code>${ctx.name}</code></p></li> <li><p>Conteúdo de script embutido (<em>ver nota</em>)</p> <p>: <code>@ctx.name@</code></p></li></ul> <div class="custom-block tip"><p class="custom-block-title">NOTA</p> <p>A expansão da variável &quot;Conteúdo de script embutido&quot; <strong>não</strong> está disponível para passos de &quot;Arquivo de script&quot;. O arquivo de script não é reescrito quando usado para execução.</p></div> <div class="custom-block tip"><p class="custom-block-title">DICA</p> <p>Isso pode ser desativado, consulte <a href="/administration/configuration/config-file-reference.html#framework-properties">Guia do administrador&gt; Referência do arquivo de configuração&gt; framework.properties</a>.</p></div> <ul><li><p>Variáveis ​​de ambiente (<em>ver nota</em>)</p> <p>: <code>$RD_CTX_NAME</code></p> <p>A sintaxe para variáveis ​​de ambiente é que todas as letras se tornam maiúsculas, a pontuação é substituída por sublinhado e o nome é prefixado com <code>RD</code>.</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">NOTA</p> <p>Veja o capítulo <a href="/administration/projects/_node_-execution/ssh.html#configuring-remote-machine-for-ssh">Configurando Máquina Remota para SSH</a> para informações sobre os requisitos do servidor SSH.</p></div> <ul><li>Sintaxe especial para escopos diferentes (veja abaixo)</li></ul> <h3 id="sobre-escopos-de-variavel-de-contexto"><a href="#sobre-escopos-de-variavel-de-contexto" class="header-anchor">#</a> Sobre Escopos de Variável de Contexto</h3> <p>As variáveis ​​<code>job.*</code> e <code>execution.*</code> mencionadas acima existem no escopo Global.</p> <p>Variáveis ​​de escopo global estão disponíveis para todos os tipos de passos de fluxo de trabalho.</p> <p>Os valores <code>node.*</code> Estão disponíveis dentro de um escopo <em>Nó</em>. Pode haver vários Escopos de <em>Nó</em> e cada Escopo de <em>Nó</em> é vinculado a um Nome de <em>Nó</em> específico.</p> <p>Os valores dos Escopos de <em>Nó</em> para um nome de <em>Nó</em> específico estão disponíveis no mesmo Escopos para o mesmo <em>Nó</em>.</p> <p>Variáveis ​​que são adicionadas ao Contexto enquanto o fluxo de trabalho está em execução, como variáveis ​​<code>data.*</code>, São adicionadas ao Escopo Global ou a um Escopo <em>Nó</em>.</p> <p>Se a variável for incluída em um <em>Passo do nó</em>, os valores de dados serão armazenados no Escopos do <em>Nó</em> para esse <em>nó</em>. Isso permite que vários valores sejam adicionados por diferentes <em>nós</em> com o mesmo nome de variável.</p> <p>Quaisquer variáveis ​​dentro do mesmo Escopo podem ser referenciadas sem sintaxe especial. Por exemplo, dentro de um <em>Passo do nó</em> outras variáveis
adicionado ao Contexto dentro do mesmo <em>Nó</em> Escopo para o mesmo <em>nó</em> pode ser referenciado usando <code>${data.MyKey}</code>.</p> <p>Se um valor não for encontrado para a referência de variável dentro do escopo atual, o escopo é &quot;ampliado&quot; para localizá-lo em um escopo superior. Portanto, todas as variáveis ​​com escopo global
os valores podem ser referenciados usando a sintaxe normal.</p> <p>Os valores de escopo <em>Nó</em> podem ser referenciados a partir do escopo Global ou de um escopo de <em>Nó</em> diferente usando uma sintaxe especial:</p> <ul><li><code>${data.MyKey@MyNodeName}</code> - referencia a variável dentro do escopo <em>Nó</em> para o <code>MyNodeName</code> <em>nó</em>.</li> <li><code>${data.MyKey*}</code> - coleta todos os valores de variáveis ​​de todos os Escopos do <em>Nó</em>, e produz um único valor usando <code>,</code>(vírgula) para delimitar os valores.</li> <li><code>${data.MyKey*;}</code> - especifica um delimitador diferente para os valores</li></ul> <div class="custom-block tip"><p class="custom-block-title">DICA</p> <p>Se uma referência de variável não produz o valor esperado, certifique-se de que o Escopo do valor e o Escopo do ponto de referência (ou seja, onde a referência da variável de contexto está sendo avaliada) correspondem.</p> <p>O <strong>Log Data</strong> <em>Passo do fluxo de trabalho</em> registrará todas as variáveis ​​de contexto com escopo definido, para visualizar quais valores estão disponíveis em um determinado ponto em um fluxo de trabalho.</p> <p>A Estratégia de Fluxo de Trabalho usada no Fluxo de Trabalho rege quando passos executa: Uma estratégia sequencial significa que cada passo será processado antes de passos subsequentes, o que permite (por exemplo) Passo 2 fazer referência a qualquer valor armazenado em Passo 1, mesmo de <em>Nós</em> diferentes. No entanto, um <em>Nó</em> primeiro, Paralelo ou Estratégia de conjunto de regras terá um comportamento diferente, portanto, dependendo da ordem em que os Passos são executados, alguns valores capturados podem ou não estar presentes.</p></div> <h3 id="plugins-de-filtro-de-registro-de-captura-de-dados"><a href="#plugins-de-filtro-de-registro-de-captura-de-dados" class="header-anchor">#</a> Plugins de filtro de registro de captura de dados</h3> <p>O oferece dois plug-ins de filtro de registro de captura de dados diferentes. O primeiro, Dados de valor-chave, captura dados simples de chave/valor usando um formato de texto simples. O segundo, Multiline Regex Data Capture, captura dados de chave/valor regex multilinha usando um formato de texto simples. Os plug-ins do filtro de registro de captura de dados permitem que os usuários definam e utilizem variáveis ​​de dados em vários <em>job</em> passos.</p> <p>Para obter mais informações sobre dados de valor-chave, consulte <a href="/user-guide/log-filters/key-value-data.html">Dados de valor-chave</a>.</p> <p>Para obter mais informações sobre dados de valor-chave, consulte <a href="/user-guide/log-filters/multi-line-regex.html">Multiline Regex Capture</a>.</p> <h3 id="ferramentas-de-linha-de-comando-e-acesso-a-api"><a href="#ferramentas-de-linha-de-comando-e-acesso-a-api" class="header-anchor">#</a> Ferramentas de linha de comando e acesso à API</h3> <p><em>Jobs</em> podem ser exportados ou importados no formato XML ou Yaml usando a API ou a ferramenta CLI <code>rd</code>.</p> <ul><li><a href="/api/api.html#export-jobs">Exportando <em>Jobs</em></a></li> <li><a href="/api/api.html#importing-jobs">Importing <em>Jobs</em></a></li> <li><a href="https://google.github.io/wcontrol-cli/" target="_blank" rel="noopener noreferrer">Ferramenta RD CLI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/user-guide/creating-jobs.html" class="prev">
        Criação de jobs
      </a></span> <span class="next"><a href="/user-guide/job-options.html">
        Opções de Job
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.94749c3b.js" defer></script><script src="/assets/js/2.ed82773e.js" defer></script><script src="/assets/js/20.9bf6df9a.js" defer></script>
  </body>
</html>
